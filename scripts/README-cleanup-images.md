# –°–∫—Ä–∏–ø—Ç –æ—á–∏—Å—Ç–∫–∏ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–°–∫—Ä–∏–ø—Ç –Ω–∞—Ö–æ–¥–∏—Ç –∏ —É–¥–∞–ª—è–µ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è emoji –∏–∑ UploadThing —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–°–∫–∞–Ω–∏—Ä—É–µ—Ç –ë–î** - –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ `imageUrl` –∏–∑:
   - `Category.imageUrl` (–∫–∞—Å—Ç–æ–º–Ω—ã–µ emoji –∫–∞—Ç–µ–≥–æ—Ä–∏–π)
   - `Product.imageUrl` (–∫–∞—Å—Ç–æ–º–Ω—ã–µ emoji –ø—Ä–æ–¥—É–∫—Ç–æ–≤)

2. **–ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤** –∏–∑ UploadThing

3. **–ù–∞—Ö–æ–¥–∏—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ** - —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ñ–∞–π–ª—ã –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å —Ñ–∞–π–ª–∞–º–∏ –≤ –ë–î

4. **–£–¥–∞–ª—è–µ—Ç –ª–∏—à–Ω–µ–µ** - —É–¥–∞–ª—è–µ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã –ø–∞–∫–µ—Ç–∞–º–∏ –ø–æ 10 —à—Ç—É–∫

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–Ω–∞—á–∞–ª–∞)

```bash
npm run cleanup-images:dry
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

- –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã
- –†–∞–∑–º–µ—Ä –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
- –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –æ—Å–≤–æ–±–æ–∂–¥–∞–µ–º–æ–≥–æ –º–µ—Å—Ç–∞
- **–ù–ï —É–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª—ã**

### –†–µ–∞–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞

```bash
npm run cleanup-images
```

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ**: –£–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª—ã –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è!

## –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
üîç Running in DRY-RUN mode (no files will be deleted)

üìä Fetching used images from database...
‚úÖ Found 15 images in use
   - Categories: 3
   - Products: 12

üîë Extracted 15 file keys from URLs

‚òÅÔ∏è  Fetching files from UploadThing...
‚úÖ Found 25 files in UploadThing

üóëÔ∏è  Found 10 unused files:

   1. custom-emoji-apple.png
      Key: abc123def456
      Size: 45.67 KB
      Uploaded: 08.01.2026

   2. custom-emoji-banana.png
      Key: xyz789uvw012
      Size: 52.34 KB
      Uploaded: 07.01.2026

   ...

üì¶ Total size to free: 0.48 MB

‚ÑπÔ∏è  DRY-RUN: Files that WOULD be deleted:

   - Would delete: 10 files
   - Would free: 0.48 MB
   - Remaining in use: 15 files

üí° Run without --dry-run to actually delete these files
   Command: npm run cleanup-images
```

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- –ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è AI –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ emoji (–¥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏)
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- –ü–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π –Ω–∞ –¥—Ä—É–≥–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- –î–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞ –≤ UploadThing

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ**:

- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã –≤ –ë–î
- –£–¥–∞–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ
- –£–¥–∞–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–∞–º–∏ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
- –†–µ–∂–∏–º dry-run –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞

‚ùå **–ù–ï —Ç—Ä–æ–≥–∞–µ—Ç**:

- –§–∞–π–ª—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö
- –§–∞–π–ª—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö
- Unicode emoji (–æ–Ω–∏ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ UploadThing)

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- **–ü–∞–∫–µ—Ç–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ**: –ø–æ 10 —Ñ–∞–π–ª–æ–≤ –∑–∞ —Ä–∞–∑
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É –µ—Å–ª–∏ –æ–¥–∏–Ω –ø–∞–∫–µ—Ç —É–ø–∞–ª
- **–§–æ—Ä–º–∞—Ç URL**: `https://utfs.io/f/{fileKey}`
- **API**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `UTApi` –∏–∑ `uploadthing/server`
